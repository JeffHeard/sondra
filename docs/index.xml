<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Sondra Documentation</title>
    <link>https://jeffersonheard.github.io/sondra/index.xml</link>
    <description>Recent content on Sondra Documentation</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <copyright>Released under the MIT license</copyright>
    <lastBuildDate>Wed, 12 Oct 2016 16:38:34 -0400</lastBuildDate>
    <atom:link href="https://jeffersonheard.github.io/sondra/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Applications</title>
      <link>https://jeffersonheard.github.io/sondra/topical-guides/applications/</link>
      <pubDate>Wed, 12 Oct 2016 16:38:34 -0400</pubDate>
      
      <guid>https://jeffersonheard.github.io/sondra/topical-guides/applications/</guid>
      <description>&lt;p&gt;Coming Soon&amp;hellip;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Collections</title>
      <link>https://jeffersonheard.github.io/sondra/topical-guides/collections/</link>
      <pubDate>Wed, 12 Oct 2016 16:38:34 -0400</pubDate>
      
      <guid>https://jeffersonheard.github.io/sondra/topical-guides/collections/</guid>
      <description>&lt;p&gt;Coming Soon&amp;hellip;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Document Processors</title>
      <link>https://jeffersonheard.github.io/sondra/extending/document-processors/</link>
      <pubDate>Wed, 12 Oct 2016 16:38:34 -0400</pubDate>
      
      <guid>https://jeffersonheard.github.io/sondra/extending/document-processors/</guid>
      <description>&lt;p&gt;Coming Soon&amp;hellip;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Documents</title>
      <link>https://jeffersonheard.github.io/sondra/topical-guides/documents/</link>
      <pubDate>Wed, 12 Oct 2016 16:38:34 -0400</pubDate>
      
      <guid>https://jeffersonheard.github.io/sondra/topical-guides/documents/</guid>
      <description>&lt;p&gt;Coming Soon&amp;hellip;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Exposing Methods</title>
      <link>https://jeffersonheard.github.io/sondra/topical-guides/methods/</link>
      <pubDate>Wed, 12 Oct 2016 16:38:34 -0400</pubDate>
      
      <guid>https://jeffersonheard.github.io/sondra/topical-guides/methods/</guid>
      <description>&lt;p&gt;Coming Soon&amp;hellip;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Output Formats</title>
      <link>https://jeffersonheard.github.io/sondra/extending/output-formats/</link>
      <pubDate>Wed, 12 Oct 2016 16:38:34 -0400</pubDate>
      
      <guid>https://jeffersonheard.github.io/sondra/extending/output-formats/</guid>
      <description>&lt;p&gt;Coming Soon&amp;hellip;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Queries over HTTP/S</title>
      <link>https://jeffersonheard.github.io/sondra/topical-guides/querying/</link>
      <pubDate>Wed, 12 Oct 2016 16:38:34 -0400</pubDate>
      
      <guid>https://jeffersonheard.github.io/sondra/topical-guides/querying/</guid>
      <description>&lt;p&gt;Coming Soon&amp;hellip;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>QuerySets in Python</title>
      <link>https://jeffersonheard.github.io/sondra/topical-guides/querysets/</link>
      <pubDate>Wed, 12 Oct 2016 16:38:34 -0400</pubDate>
      
      <guid>https://jeffersonheard.github.io/sondra/topical-guides/querysets/</guid>
      <description>&lt;p&gt;Coming Soon&amp;hellip;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Request Processors</title>
      <link>https://jeffersonheard.github.io/sondra/extending/request-processors/</link>
      <pubDate>Wed, 12 Oct 2016 16:38:34 -0400</pubDate>
      
      <guid>https://jeffersonheard.github.io/sondra/extending/request-processors/</guid>
      <description>&lt;p&gt;Coming Soon&amp;hellip;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Suites</title>
      <link>https://jeffersonheard.github.io/sondra/topical-guides/suites/</link>
      <pubDate>Wed, 12 Oct 2016 16:38:34 -0400</pubDate>
      
      <guid>https://jeffersonheard.github.io/sondra/topical-guides/suites/</guid>
      <description>&lt;p&gt;Coming Soon&amp;hellip;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Value Handlers</title>
      <link>https://jeffersonheard.github.io/sondra/extending/value-handlers/</link>
      <pubDate>Wed, 12 Oct 2016 16:38:34 -0400</pubDate>
      
      <guid>https://jeffersonheard.github.io/sondra/extending/value-handlers/</guid>
      <description>&lt;p&gt;Coming Soon&amp;hellip;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Extending</title>
      <link>https://jeffersonheard.github.io/sondra/extending/</link>
      <pubDate>Wed, 12 Oct 2016 16:38:08 -0400</pubDate>
      
      <guid>https://jeffersonheard.github.io/sondra/extending/</guid>
      <description>

&lt;h2 id=&#34;table-of-contents&#34;&gt;Table of Contents&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;output-formats&#34;&gt;Adding new Output Formats&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;request-processors&#34;&gt;Getting info and editing requests with RequestProcessors&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;document-processors&#34;&gt;Adding data to documents with DocumentProcessors&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;value-handlers&#34;&gt;Treating JSON properties specially with ValueHandlers&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>Topical Guides</title>
      <link>https://jeffersonheard.github.io/sondra/topical-guides/</link>
      <pubDate>Wed, 12 Oct 2016 16:38:08 -0400</pubDate>
      
      <guid>https://jeffersonheard.github.io/sondra/topical-guides/</guid>
      <description>

&lt;h2 id=&#34;table-of-contents&#34;&gt;Table of Contents&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;querying&#34;&gt;Querying over the web&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;documents&#34;&gt;Working with Documents&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;documents&#34;&gt;Working with Collections&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;documents&#34;&gt;Working with Applications&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;documents&#34;&gt;Working with Suites&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;querysets&#34;&gt;QuerySets in Python&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>Tutorial</title>
      <link>https://jeffersonheard.github.io/sondra/basics/</link>
      <pubDate>Wed, 12 Oct 2016 16:38:08 -0400</pubDate>
      
      <guid>https://jeffersonheard.github.io/sondra/basics/</guid>
      <description>&lt;p&gt;The tutorial walks you through building the classic to-do list app with Sondra.&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;a href=&#34;tutorial-1&#34;&gt;Getting Started&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;tutorial-2&#34;&gt;Expose it to the web&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;tutorial-3&#34;&gt;Accessing Schemas&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;tutorial-4&#34;&gt;Adding Data&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</description>
    </item>
    
    <item>
      <title>Getting Started</title>
      <link>https://jeffersonheard.github.io/sondra/basics/tutorial-1/</link>
      <pubDate>Wed, 12 Oct 2016 16:38:34 -0400</pubDate>
      
      <guid>https://jeffersonheard.github.io/sondra/basics/tutorial-1/</guid>
      <description>

&lt;h3 id=&#34;introduction&#34;&gt;Introduction&lt;/h3&gt;

&lt;p&gt;This tutorial serves as a basic introduction to Sondra, its data model, and how you
can create an API. The classic example web API is that of a to-do list application. Our tutorial
will build it up in stages, starting with the basic structure of an application, followed by data
modeling, and then we&amp;rsquo;ll add exposed methods to see how those work.&lt;/p&gt;

&lt;p&gt;Finally, you&amp;rsquo;ll work through accessing the API via Javascript (ES2015) and Python.&lt;/p&gt;

&lt;p&gt;To do this tutorial, you will need the following:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Sondra - &lt;a href=&#34;https://github.com/JeffHeard/sondra.git&#34;&gt;https://github.com/JeffHeard/sondra.git&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;RethinkDB - &lt;a href=&#34;https://rethinkdb.com&#34;&gt;https://rethinkdb.com&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Python 3 - &lt;a href=&#34;https://www.python.org&#34;&gt;https://www.python.org&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Your favorite text editor or IDE. I like &lt;a href=&#34;https://www.atom.io/&#34;&gt;Atom&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;first-steps&#34;&gt;First Steps&lt;/h3&gt;

&lt;p&gt;First thing&amp;rsquo;s first. Let&amp;rsquo;s make sure Sondra has all its requirements.  Assuming you have a virtual
environment setup already, all you have to do is install requirements.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ cd sondra
$ pip install -r requirements.txt
$ export PYTHONPATH=$PYTHONPATH:$PWD  # if you want to develop in a different directory or run the examples.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Let&amp;rsquo;s start with some imports.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;from sondra.collection import Collection
from sondra.document import Document
from sondra.application import Application
from sondra.suite import Suite
from sondra.schema import S
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;These imports serve to introduce us to the basic building blocks of Sondra: Application, Collection,
and Document. We will subclass each to create our application.  The &lt;strong&gt;Document&lt;/strong&gt; subclass defines
the schema of a record in &lt;a href=&#34;https://rethinkdb.com/&#34;&gt;RethinkDB&lt;/a&gt; and all the methods that operate
directly on a record instance.&lt;/p&gt;

&lt;p&gt;The &lt;strong&gt;Collection&lt;/strong&gt; subclass defines the way a document relates to the database. It defines things
such as primary key and indexes and methods that operate on the collection as a whole. Methods
defined on the collection class are conceptually similar to class methods in Python.&lt;/p&gt;

&lt;p&gt;The &lt;strong&gt;Application&lt;/strong&gt; subclass defines a group of collections that serve a common purpose.  The
application will often contain schema fragment definitions that are common across multiple related
collections and methods that apply to multiple collections across the application.&lt;/p&gt;

&lt;p&gt;The &lt;strong&gt;Suite&lt;/strong&gt; subclass defines the complete API suite, including configurations and database
connections. Applications are added to the Suite.&lt;/p&gt;

&lt;p&gt;Finally &lt;strong&gt;S&lt;/strong&gt; is a utility module whose functions return dictionaries that fit the format of
&lt;a href=&#34;http://json-schema.org/&#34;&gt;JSON Schema&lt;/a&gt; and hyper-schema.&lt;/p&gt;

&lt;h3 id=&#34;modeling-data&#34;&gt;Modeling Data&lt;/h3&gt;

&lt;p&gt;So let&amp;rsquo;s start by creating a Document that models a to-do list item:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;from sondra.collection import Collection
from sondra.document import Document
from sondra.application import Application
from sondra.suite import Suite
from sondra.schema import S

class Item(Document):
    schema = {
      &amp;quot;type&amp;quot;: &amp;quot;object&amp;quot;,
      &amp;quot;required&amp;quot;: [&amp;quot;title&amp;quot;],
      &amp;quot;properties&amp;quot;: {
        &amp;quot;title&amp;quot;: {&amp;quot;type&amp;quot;: &amp;quot;string&amp;quot;, &amp;quot;description&amp;quot;: &amp;quot;The title of the item&amp;quot;},
        &amp;quot;complete&amp;quot; {&amp;quot;type&amp;quot;: &amp;quot;boolean&amp;quot;, &amp;quot;default&amp;quot;: False},
        &amp;quot;created&amp;quot;: {&amp;quot;type&amp;quot;: &amp;quot;string&amp;quot;, &amp;quot;format&amp;quot;: &amp;quot;date-time&amp;quot;}
      }
    }
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Now we&amp;rsquo;ve defined a simple item that has a title, a space to mark whether the to-do item is
complete, and a creation date.  Note that schemas are just Python dicts. As long as your dictionary
and all its elements are compatible with the built-in &lt;code&gt;json&lt;/code&gt; package, your schema will work.
However, this syntax is rather verbose and prone to typo-induced bugs. Therefore the &lt;code&gt;S&lt;/code&gt; package
provides a bunch of utility functions that generate schema objects. These functions return plain old
dicts, so there&amp;rsquo;s functionally no difference between the two syntaxes, but the S module is safer:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;class Item(Document):
    schema = S.object(
        required=[&#39;Title&#39;],
        properties=S.props(
            (&amp;quot;title&amp;quot;, S.string(description=&amp;quot;The title of the item&amp;quot;)),
            (&amp;quot;complete&amp;quot;, S.boolean(default=False)),
            (&amp;quot;created&amp;quot;, S.datetime()),
    ))
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;That&amp;rsquo;s much shorter! Again, there&amp;rsquo;s no magic to the &lt;code&gt;S.*&lt;/code&gt; functions. They&amp;rsquo;re just shorthand and
provide a bit more checking.  It&amp;rsquo;s the same schema as above.  One difference is that the first
example does not enforce any order (except in Python 3.6!) on the dictionary elements.  The version
in the most recent example does, because &lt;code&gt;S.props&lt;/code&gt; uses an &lt;code&gt;OrderedDict&lt;/code&gt; instead of a plain &lt;code&gt;dict&lt;/code&gt;
Now let&amp;rsquo;s see how to get it into a collection and an application, and thus into the database. The
next three classes define the collection (RethinkDB table), application (RethinkDB database), and
the suite (the full group of applications, served on a single tree from a single domain):&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;class Items(Collection):
    document_class = Item  # this is the class that as instances per-record
    indexes = [&amp;quot;title&amp;quot;, &amp;quot;complete&amp;quot;]  # the fields to build indexes on.
    order_by = [&amp;quot;created&amp;quot;]  # Sondra treats &amp;quot;format&amp;quot;: &amp;quot;date-time&amp;quot; as a RethinkDB Date.

class TodoApp(Application):
    collections = (Items,)  # For now we&#39;ll just define the collections

class TodoSuite(Suite):
    cross_origin = True  # append CORS headers
    debug = True  # extra logging
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;getting-it-into-rethinkdb&#34;&gt;Getting it into RethinkDB&lt;/h3&gt;

&lt;p&gt;Now that we have all the definitions set up, let&amp;rsquo;s get our data into the database:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;&amp;gt;&amp;gt;&amp;gt; todo = TodoSuite()
&amp;gt;&amp;gt;&amp;gt; TodoApp(todo)
&amp;gt;&amp;gt;&amp;gt; todo.validate()
&amp;gt;&amp;gt;&amp;gt; todo.ensure_database_objects()

INFO:TodoSuite:Connection established to &#39;default&#39;
INFO:TodoSuite:Suite base url is: &#39;http://localhost:5000/api&#39;
INFO:TodoSuite:Docstring processor is {0}
INFO:TodoApp:Registering application todo-app
INFO:TodoSuite:Registered application TodoApp to http://localhost:5000/api/todo-app
INFO:TodoApp:Creating collection for todo-app/items
INFO:TodoSuite:Checking schemas for validity
INFO:TodoSuite:+ todo-app
INFO:TodoSuite:--- items
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The call to &lt;code&gt;todo.ensure_database_objects()&lt;/code&gt; creates / ensures the existence of tables and indexes and even
databases for everything that&amp;rsquo;s a part of the suite.  It should always be called once when your
application initializes. At the most basic level, you&amp;rsquo;re now ready to expose your API to your
clients now (we&amp;rsquo;ll handle authentication later), and you can play around with it in Python as well.
In Python, Sondra tries to be as pythonic as possible. All levels of the API are exposed as
dictionary-like objects. The keys are dash-cased versions of the classnames (this can be overridden,
  but is the default).&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>